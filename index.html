<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBERGAME | Natsumi Elite</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/681/681494.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

</head>

<body>
    <div id="toast-container"></div>

    <div id="auth-screen" class="overlay">
        <div class="auth-card glass">
            <h1 class="logo">CYBER<span>GAME</span></h1>
            <div id="auth-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="user-input" placeholder="T√™n ƒëƒÉng nh·∫≠p">
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="pass-input" placeholder="M·∫≠t kh·∫©u">
                </div>
                <div class="auth-btns">
                    <button onclick="handleAuth('login')" class="btn-main">ƒêƒÇNG NH·∫¨P</button>
                    <button onclick="handleAuth('register')" class="btn-sub">ƒêƒÇNG K√ù</button>
                </div>
            </div>
            <p class="footer-hint">Thi·∫øt k·∫ø b·ªüi Natsumi Pro Edition 2026</p>
        </div>
    </div>
    <div id="loading-screen">Loading...</div>

    <div id="app-interface" class="app-wrapper hidden">
        <aside class="sidebar">
            <div class="side-icons">
                <div class="nav-btn active" onclick="goHome()"><i class="fas fa-home"></i></div>
                <div class="nav-btn" onclick="showSection('game-list')"><i class="fas fa-gamepad"></i></div>
                <div id="admin-shield" class="nav-btn hidden" onclick="showSection('admin')"><i
                        class="fas fa-shield-halved"></i></div>
                <div class="nav-btn logout-btn" onclick="logout()" title="ƒêƒÉng xu·∫•t">
                    <i class="fas fa-right-from-bracket"></i>
                </div>
            </div>
            <div class="side-user">
                <div class="gold-box" title="Robux/Gold">
                    <span id="gold-val">1,000</span> <i class="fas fa-coins"></i>
                </div>
                <div class="avatar-wrapper" onclick="openProfile()">
                    <img id="side-avatar" src="" class="circle-avatar">
                    <div class="online-dot"></div>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="T√¨m ki·∫øm game Natsumi...">
                </div>
                <div class="user-header" onclick="openProfile()">
                    <span id="user-display">Guest</span>
                    <i id="v-badge" class="fas fa-check-circle verified hidden"></i>
                </div>
            </header>

            <section id="sec-home" class="page">
                <div class="hero">
                    <h1>Xin ch√†o, <span id="greet-name">Player</span>!</h1>
                    <p>Ch√†o m·ª´ng b·∫°n quay tr·ªü l·∫°i h·ªá th·ªëng.</p>
                </div>
                <div class="grid">
                    <div class="card" onclick="showSection('noitu-setup')">
                        <div class="thumb purple"><i class="fas fa-font"></i></div>
                        <div class="info"><b>N·ªëi T·ª´ Battle</b>
                            <p>ƒê·∫•u v·ªõi AI Gemini</p>
                        </div>
                    </div>
                    <div class="card" onclick="devMode()">
                        <div class="thumb ocean"><i class="fas fa-dice"></i></div>
                        <div class="info"><b>C·ªù T·ª∑ Ph√∫ Tycoon</b>
                            <p>ƒêang ph√°t tri·ªÉn...</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="sec-noitu-setup" class="page hidden">


                <div class="room-ui glass">
                    <h2><i class="fas fa-plus-circle"></i> Thi·∫øt l·∫≠p tr·∫≠n ƒë·∫•u</h2>
                    <div class="setup-grid">
                        <div class="setup-item">
                            <label>S·ªë l∆∞·ª£ng ng∆∞·ªùi ch∆°i</label>
                            <select id="player-count">
                                <option value="2">2 Ng∆∞·ªùi (1vs1)</option>
                                <option value="4">4 Ng∆∞·ªùi</option>
                                <option value="10">10 Ng∆∞·ªùi</option>
                            </select>
                        </div>
                        <div class="setup-item">
                            <label>Ch·∫ø ƒë·ªô ƒë·∫•u</label>
                            <select id="game-mode">
                                <option value="bot">ƒê·∫•u v·ªõi Bot Gemini (AI)</option>
                                <option value="player">ƒê·∫•u v·ªõi ng∆∞·ªùi ch∆°i kh√°c</option>
                            </select>
                        </div>
                    </div>
                    <div class="room-btns">
                        <button class="btn-create" onclick="createRoom()">T·∫†O PH√íNG M·ªöI</button>
                        <div class="divider">HO·∫∂C NH·∫¨P M√É</div>
                        <div class="otp-row" id="otp-container">
                            <input type="text" maxlength="1" class="otp-input">
                            <input type="text" maxlength="1" class="otp-input">
                            <input type="text" maxlength="1" class="otp-input">
                            <input type="text" maxlength="1" class="otp-input">
                            <input type="text" maxlength="1" class="otp-input">
                            <input type="text" maxlength="1" class="otp-input">
                        </div>
                        <button class="btn-join" onclick="joinRoom()">V√ÄO PH√íNG</button>
                    </div>
                </div>
            </section>

            <section id="sec-lobby" class="page hidden">
                <div class="lobby-ui glass">
                    <div class="lobby-header">
                        <h3>S·∫£nh Ch·ªù N·ªëi T·ª´</h3>
                        <div class="room-badge">M√£ ph√≤ng: <span id="display-room-code">------</span></div>
                    </div>
                    <div class="player-list" id="lobby-players"></div>
                    <div class="lobby-footer">
                        <button class="btn-main pulse" id="start-btn" onclick="triggerCountdown()"
                            style="display:none;">
                            B·∫ÆT ƒê·∫¶U NGAY
                        </button>

                        <button class="btn-sub" onclick="showSection('noitu-setup')">H·ª¶Y</button>
                    </div>
                </div>
            </section>

            <section id="sec-game-play" class="page hidden">
                <div style="display:flex;gap:15px;height:calc(100vh - 80px);padding:20px;">

                    <!-- Panel online b√™n ph·∫£i -->
                    <div id="online-panel"
                         style="width:180px;flex-shrink:0;
                                background:rgba(255,255,255,0.03);
                                border:1px solid rgba(255,255,255,0.08);
                                border-radius:16px;padding:15px;
                                overflow-y:auto;order:2;">
                    </div>

                <div class="game-container" style="flex:1;height:100%;padding:0;">
                    <div class="game-header">
                        <div class="turn-indicator" id="turn-info">ƒêang ch·ªù...</div>
                        <div class="last-word-box">T·ª´ hi·ªán t·∫°i: <span id="current-target">---</span></div>
                    </div>
                    <div class="chat-area" id="game-messages"></div>
                    <div class="game-controls">

                        <div class="input-wrapper chat-box">
                            <input type="text" id="chat-input" placeholder="Nh·∫Øn tin..."
                                onkeydown="handleGameInput(event, 'chat')">

                            <button onclick="sendChat()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="current-word-box">
                            T·ª´ hi·ªán t·∫°i: <span id="current-word">---</span>
                        </div>

                        <div class="input-wrapper word-box">
                            <input type="text" id="word-input" placeholder="Nh·∫≠p t·ª´ n·ªëi..."
                                onkeydown="handleGameInput(event, 'word')">

                            <button id="word-send-btn" onclick="sendWord()" class="...">G·ª¨I T·ª™</button>

                        </div>

                    </div>

                </div>
                </div><!-- end flex wrapper -->
            </section>

            <section id="sec-admin" class="page hidden">
                <div class="admin-panel glass">
                    <h3><i class="fas fa-shield-check"></i> Natsumi Super Admin</h3>
                    <div class="admin-grid">
                        <button class="btn-main" onclick="buff('gold')">BUFF 1M GOLD</button>
                        <button class="btn-sub" onclick="clearData()">RESET DATABASE</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="countdown-screen" class="overlay hidden">
        <h1 id="cd-number">3</h1>
    </div>

    <div id="profile-modal" class="modal hidden">
        <div class="modal-content glass">
            <h2>Thi·∫øt l·∫≠p h·ªì s∆°</h2>
            <div class="profile-preview">
                <img id="preview-img" src="" class="circle-avatar big">
            </div>
            <div class="input-group">
                <label>T√™n hi·ªÉn th·ªã</label>
                <input type="text" id="new-name" placeholder="Nh·∫≠p t√™n m·ªõi...">
            </div>
            <div class="input-group">
                <label>·∫¢nh ƒë·∫°i di·ªán (Link/URL)</label>
                <input type="text" id="new-avatar-link" placeholder="D√°n link ·∫£nh v√†o ƒë√¢y...">
            </div>
            <div class="input-group">
                <label>Ho·∫∑c t·∫£i ·∫£nh t·ª´ m√°y</label>
                <input type="file" id="new-avatar-file" accept="image/*">
            </div>
            <div class="m-btns">
                <button onclick="closeProfile()" class="btn-sub">H·ª¶Y</button>
                <button onclick="saveProfile()" class="btn-main">L∆ØU THAY ƒê·ªîI</button>
            </div>
        </div>
    </div>

    <!-- Modal x√°c nh·∫≠n ƒëƒÉng xu·∫•t -->
    <div id="logout-modal" class="modal hidden">
        <div class="modal-content glass" style="width:360px;text-align:center;">
            <div style="font-size:3rem;margin-bottom:15px;">üëã</div>
            <h3 style="margin-bottom:10px;">ƒêƒÉng xu·∫•t?</h3>
            <p style="color:#a1a1aa;margin-bottom:25px;">B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t kh·ªèi t√†i kho·∫£n kh√¥ng?</p>
            <div style="display:flex;gap:12px;">
                <button onclick="closeLogoutModal()" class="btn-sub" style="flex:1;">Hu·ª∑</button>
                <button onclick="confirmLogout()" class="btn-main" style="flex:1;background:#ef4444;">ƒêƒÉng xu·∫•t</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

</body>

</html>
